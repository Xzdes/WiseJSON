
<div align="center">
  <img src="logo.png" width="100" alt="WiseJSON Logo"/>
  <h1>WiseJSON ‚Äî –ë—ã—Å—Ç—Ä–∞—è JSON-–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Node.js</h1>
  <a href="https://www.npmjs.com/package/wise-json-db"><img src="https://img.shields.io/npm/v/wise-json-db.svg?style=flat-square" /></a>
  <a href="https://github.com/Xzdes/WiseJSON"><img src="https://img.shields.io/github/stars/Xzdes/WiseJSON?style=flat-square" /></a>
  <br />
  <b>–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏ –ø—Ä–æ—Å—Ç–∞—è embedded JSON-–±–∞–∑–∞ –¥–ª—è Node.js</b>
</div>

---

üìñ [English version / –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è](./README.en.md)


# WiseJSON ‚Äî –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è JSON –±–∞–∑–∞ –¥–ª—è Node.js

WiseJSON ‚Äî —ç—Ç–æ –±—ã—Å—Ç—Ä–∞—è, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏ –ø—Ä–æ—Å—Ç–∞—è embedded JSON-–±–∞–∑–∞ –¥–ª—è Node.js. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—ç—à–∞, –ª–æ–≥–æ–≤, –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Ä–µ—à–µ–Ω–∏–π –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

---

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å WAL + —á–µ–∫–ø–æ–∏–Ω—Ç—ã** ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö.
- **–ú–∞—Å—Å–æ–≤—ã–µ –≤—Å—Ç–∞–≤–∫–∏** ‚Äî `insertMany`, `updateMany`.
- **TTL (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏)** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
- **–°–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–µ–∫–ø–æ–∏–Ω—Ç—ã** ‚Äî —É–¥–æ–±—Å—Ç–≤–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π.
- **–ò–Ω–¥–µ–∫—Å—ã** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏ –æ–±—ã—á–Ω—ã–µ.
- **–ú—É–ª—å—Ç–∏-–∫–æ–ª–ª–µ–∫—Ü–∏–∏** ‚Äî –∫–∞–∫ –≤ MongoDB, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ.
- **–°–æ–±—ã—Ç–∏—è** ‚Äî `on('insert')`, `on('update')`, –∏ —Ç.–¥.
- **–ü—Ä–æ—Å—Ç–æ–π API** ‚Äî –Ω–∞ –æ—Å–Ω–æ–≤–µ Promise.
- **–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤–∫–ª—é—á–∞—è crash recovery.
- **–ß–∏—Å—Ç—ã–π Node.js** ‚Äî –±–µ–∑ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.
- **CLI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π RU/EN**.

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install wise-json-db uuid
```

---

## üî• –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```js
const WiseJSON = require('wise-json-db');
const db = new WiseJSON('./my-db-folder', { checkpointIntervalMs: 500 });
await db.init();

const users = await db.collection('users');
await users.insert({ name: '–ê–ª–∏—Å–∞', email: 'alice@example.com' });
const found = await users.findOneByIndexedValue('email', 'alice@example.com');
console.log(found);
```

---

## üìò –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –ú–∞—Å—Å–æ–≤–∞—è –≤—Å—Ç–∞–≤–∫–∞

```js
await users.insertMany([
  { name: '–ë–æ–±', email: 'bob@example.com' },
  { name: '–ß–∞—Ä–ª–∏', email: 'charlie@example.com' }
]);
```

### –ò–Ω–¥–µ–∫—Å—ã

```js
await users.createIndex('email', { unique: true });
const found = await users.findOneByIndexedValue('email', 'bob@example.com');
```

### TTL / –£–¥–∞–ª–µ–Ω–∏–µ

```js
await users.insert({
  name: '–ï–≤–∞',
  email: 'eve@example.com',
  expireAt: Date.now() + 1000 * 60 // —É–¥–∞–ª–∏—Ç—Å—è —á–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É
});
```

### –≠–∫—Å–ø–æ—Ä—Ç / –ò–º–ø–æ—Ä—Ç

```js
const data = await users.getAll();
require('fs').writeFileSync('export.json', JSON.stringify(data, null, 2));

const arr = JSON.parse(require('fs').readFileSync('export.json', 'utf8'));
await users.insertMany(arr);
```

---

## üõ† CLI –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä—ã:
```bash
wise-json list
wise-json insert users '{"name": "CLI User"}'
wise-json export users out.json
```

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `WISE_JSON_PATH` ‚Äî –ø—É—Ç—å –∫ –±–∞–∑–µ
- `WISE_JSON_LANG` ‚Äî `ru` –∏–ª–∏ `en`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫:
```bash
node test/extreme-stress-wise-json.js
node test/segment-check-test.js
```

–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:
- 5‚ÄØ000 –≤—Å—Ç–∞–≤–æ–∫ < 300 –º—Å
- WAL –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- TTL –∏ –∏–Ω–¥–µ–∫—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üß± –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ

- **WAL** ‚Äî –∂—É—Ä–Ω–∞–ª –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ß–µ–∫–ø–æ–∏–Ω—Ç—ã** ‚Äî —Å–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–°–µ–≥–º–µ–Ω—Ç—ã** ‚Äî –Ω–µ—Ç –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- **–û—á–µ—Ä–µ–¥—å** ‚Äî –∑–∞–ø–∏—Å–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- **Map –≤ –ø–∞–º—è—Ç–∏** ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üß≠ –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

- [ ] –°–∂–∞—Ç–∏–µ WAL –≤ —Ñ–æ–Ω–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º
- [ ] –†–µ–∂–∏–º REPL / CLI –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Electron)

---

## üìé –°—Å—ã–ª–∫–∏

- GitHub: https://github.com/Xzdes/WiseJSON
- NPM: https://npmjs.com/package/wise-json-db

–õ–∏—Ü–µ–Ω–∑–∏—è: MIT

---

## üß© –ü–æ—á–µ–º—É WiseJSON?

WiseJSON —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ —É–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

- **–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω—ã–µ batch-–≤—Å—Ç–∞–≤–∫–∏** ‚Äî –¥–æ **10‚ÄØ000+** –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∑–∞ —Å–µ–∫—É–Ω–¥—ã. Batch –∏–∑ 5‚ÄØ000 –æ–±—ä–µ–∫—Ç–æ–≤ < **300 –º—Å**.
- **WAL + —á–µ–∫–ø–æ–∏–Ω—Ç—ã** ‚Äî Write-Ahead Log + —á–µ–∫–ø–æ–∏–Ω—Ç–∏–Ω–≥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç 100% —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—è—Ö.
- **TTL (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏)** ‚Äî –î–æ–∫—É–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ `expireAt`. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ª–æ–≥–æ–≤ –∏ –∫—ç—à–∞.
- **–°–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–µ–∫–ø–æ–∏–Ω—Ç—ã** ‚Äî –ù–µ—Ç –ª–∏–º–∏—Ç–æ–≤ –ø–æ —Ä–∞–∑–º–µ—Ä—É, –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å **–º–∏–ª–ª–∏–æ–Ω—ã** –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –í—Å—ë –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —á–∞—Å—Ç–∏.
- **–°–æ–±—ã—Ç–∏—è-—Ö—É–∫–∏** ‚Äî `beforeInsert`, `afterUpdate`, `onClear` –∏ –¥—Ä—É–≥–∏–µ. –£–¥–æ–±–Ω–æ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –º–µ—Ç—Ä–∏–∫.
- **–ú—É–ª—å—Ç–∏–∫–æ–ª–ª–µ–∫—Ü–∏–∏** ‚Äî –ö–∞–∂–¥–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞, —Å–æ —Å–≤–æ–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, –∏–Ω–¥–µ–∫—Å–∞–º–∏, WAL –∏ —á–µ–∫–ø–æ–∏–Ω—Ç–∞–º–∏.
- **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è** ‚Äî –£—Å–∫–æ—Ä—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –ø–æ–ª—è–º. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ–±—ã—á–Ω—ã–µ –∏ **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ** –∏–Ω–¥–µ–∫—Å—ã.
- **–ò–º–ø–æ—Ä—Ç / —ç–∫—Å–ø–æ—Ä—Ç / —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî –í–µ—Å—å –Ω–∞–±–æ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏. `.stats()` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º.
- **–£–¥–æ–±–Ω—ã–π API** ‚Äî `await db.collection('name')` –∏ –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É —Ä–∞–±–æ—Ç–∞—Ç—å. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –¥–∞–∂–µ –Ω–æ–≤–∏—á–∫—É.
- **–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ë–æ–ª–µ–µ **4‚ÄØ000** —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤: —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, TTL, —Å–±–æ–∏, –∏–Ω–¥–µ–∫—Å—ã.
- **–ß–∏—Å—Ç—ã–π Node.js** ‚Äî –ë–µ–∑ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ. –¢–æ–ª—å–∫–æ JavaScript.

---

## üåü –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

- **–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: 15‚ÄØ000 –≤—Å—Ç–∞–≤–æ–∫ (–ø–æ –æ–¥–Ω–æ–π –∏ batch) –∑–∞ —Å—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–µ–∫—É–Ω–¥—ã.
- **Batch-–≤—Å—Ç–∞–≤–∫–∞**: 5‚ÄØ000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –º–µ–Ω–µ–µ —á–µ–º –∑–∞ **300 –º—Å**.
- **–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**: WAL, —á–µ–∫–ø–æ–∏–Ω—Ç—ã, TTL, —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã.
- **–ë–µ–∑ –ø–æ—Ç–µ—Ä—å**: 100% –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–±–æ—è—Ö, –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ crash-—Å–∏–º—É–ª—è—Ü–∏—è—Ö.
- **–°–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–µ–∫–ø–æ–∏–Ω—Ç—ã**: –ª–µ–≥–∫–æ —Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å —Ç—ã—Å—è—á–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ —Ñ–∞–π–ª–æ–≤.
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**: —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows, Linux, Node.js 18 –∏ 20.
- **–û—Ç–∫—Ä—ã—Ç—ã–π –ø—Ä–æ–µ–∫—Ç**: [GitHub/Xzdes/WiseJSON](https://github.com/Xzdes/WiseJSON), [NPM](https://www.npmjs.com/package/wise-json-db)
