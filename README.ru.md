# üì¶ WiseJSON DB

![WiseJSON –õ–æ–≥–æ—Ç–∏–ø](logo.png)

[![NPM Version](https://img.shields.io/npm/v/wise-json-db.svg)](https://npmjs.org/package/wise-json-db)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js CI](https://github.com/Xzdes/WiseJSON/actions/workflows/nodejs.yml/badge.svg)](https://github.com/Xzdes/WiseJSON/actions/workflows/nodejs.yml)
[![Docker Hub](https://img.shields.io/badge/Docker%20Hub-–≤–∞—à_–ª–æ–≥–∏–Ω%2Fwisejson--server-blue)](https://hub.docker.com/r/–≤–∞—à_–ª–æ–≥–∏–Ω/wisejson-server)

**WiseJSON DB** ‚Äî —ç—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±—ã—Å—Ç—Ä–∞—è, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–∞—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è JSON-–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Node.js. –û–Ω–∞ –≤–∫–ª—é—á–∞–µ—Ç –º–æ—â–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, ACID-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–µ –∏–¥–µ–∞–ª—å–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –¥–ª—è **offline-first** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–≥–æ –ü–û –∏ –Ω–∞–¥–µ–∂–Ω—ã—Ö –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å–æ–≤.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker

–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä WiseJSON, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **Data Explorer** –∏ API –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Å –ø–æ–º–æ—â—å—é Docker.

**1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Docker-–æ–±—Ä–∞–∑:**
```bash
docker run -d -p 3000:3000 \
  -v wisejson_data:/data \
  --name wisejson-server \
  –≤–∞—à_–ª–æ–≥–∏–Ω_dockerhub/wisejson-server:latest
```
*(–ó–∞–º–µ–Ω–∏—Ç–µ `–≤–∞—à_–ª–æ–≥–∏–Ω_dockerhub` –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ Docker Hub)*

**2. –û—Ç–∫—Ä–æ–π—Ç–µ Data Explorer:**
–í–∞—à —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω! –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É **[http://localhost:3000](http://localhost:3000)** –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.

–§–∞–π–ª—ã –≤–∞—à–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞–¥–µ–∂–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Docker-—Ç–æ–º–µ (volume) —Å –∏–º–µ–Ω–µ–º `wisejson_data`.

‚û°Ô∏è –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Docker Compose –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤ –Ω–∞—à–µ–º **[–ü–æ–ª–Ω–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –ø–æ Docker](DOCKER.ru.md)**.

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–≤–æ–¥-–≤—ã–≤–æ–¥ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º.
*   **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
    *   **WAL (Write-Ahead Logging):** –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ —Å–±–æ–µ–≤.
    *   **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –ß–µ–∫–ø–æ–∏–Ω—Ç—ã:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —Å–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞, —Å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π.
*   **ACID-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** –û–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏.
*   **–ú–æ—â–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –ò–Ω–¥–µ–∫—Å—ã:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏ –Ω–µ—É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤, –∞ —Ç–∞–∫–∂–µ –±–æ–≥–∞—Ç—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∑–∞–ø—Ä–æ—Å–æ–≤ (`$gt`, `$in`, `$or` –∏ —Ç.–¥.) –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–∫.
*   **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Offline-First:** –ù–∞–¥–µ–∂–Ω—ã–π –¥–≤–∏–∂–æ–∫ –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ —Å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º.
*   **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** –ü–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º **Data Explorer** –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (CLI)**.
*   **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–π —Ä–∞–±–æ—Ç–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª–æ–≤—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Node.js.
*   **–õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å –∏ –ü—Ä–æ—Å—Ç–æ–π API:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`uuid`, `proper-lockfile`) –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API.

---

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ö–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Node.js)

–ß—Ç–æ–±—ã –≤—Å—Ç—Ä–æ–∏—Ç—å WiseJSON DB –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –≤–∞—à–µ Node.js-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏–∑ NPM:

```bash
npm install wise-json-db
```

---

## üìö –û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

API —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã—Ç—å –ø—Ä–æ—Å—Ç—ã–º –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–º, —Å "–ª–µ–Ω–∏–≤–æ–π" –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π.

```javascript
const { connect } = require('wise-json-db');
const path = require('path');

// `connect` —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –ë–î. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
const db = connect(path.resolve(__dirname, 'my-app-data'));

async function main() {
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é, –µ—Å–ª–∏ –æ–Ω–∞ –µ—â–µ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞.
  const users = await db.getCollection('users');
  
  await users.clear(); // –û—á–∏—Å—Ç–∏–º –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

  // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ email
  await users.createIndex('email', { unique: true });

  // –í—Å—Ç–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  await users.insert({ name: '–ê–ª–∏—Å–∞', email: 'alice@example.com', age: 30 });
  await users.insertMany([
    { name: '–ë–æ—Ä–∏—Å', email: 'bob@example.com', age: 24 },
    { name: '–í–µ—Ä–∞', email: 'vera@example.com', age: 35, tags: ['dev'] }
  ]);

  // –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞-—Ñ–∏–ª—å—Ç—Ä–∞
  const devUser = await users.findOne({ tags: 'dev', age: { $gt: 30 } });
  console.log('–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç–∞—Ä—à–µ 30:', devUser);

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ —Å—Ç–∏–ª–µ MongoDB
  const { modifiedCount } = await users.updateOne(
    { email: 'alice@example.com' },
    { $set: { status: 'active' }, $inc: { age: 1 } }
  );
  console.log(`–û–±–Ω–æ–≤–ª–µ–Ω–æ ${modifiedCount} –¥–æ–∫—É–º–µ–Ω—Ç(–æ–≤).`);
  
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ë–î, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
  await db.close();
  console.log('–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∞.');
}

main().catch(console.error);```

–î–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è API –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/docs`.

---

## üõ†Ô∏è –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (CLI)

WiseJSON DB –≤–∫–ª—é—á–∞–µ—Ç –º–æ—â–Ω—ã–π CLI –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
wise-json --help

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
wise-json list-collections

# –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
wise-json show-collection users --limit 5 --sort age --order desc

# –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å (—Ç—Ä–µ–±—É–µ—Ç —Ñ–ª–∞–≥ --allow-write –¥–ª—è –∏–∑–º–µ–Ω—è—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
wise-json create-index users email --unique --allow-write```

---
## ü§ù –í–∫–ª–∞–¥ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—à –≤–∫–ª–∞–¥! –ë—É–¥—å —Ç–æ –æ—Ç—á–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏–ª–∏ pull-—Ä–µ–∫–≤–µ—Å—Ç—ã, –≤–∞—à–∞ –ø–æ–º–æ—â—å –±—É–¥–µ—Ç –æ—Ü–µ–Ω–µ–Ω–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ—Ç–∫—Ä—ã–≤–∞—Ç—å issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –≤–∞—à–∏—Ö –∏–¥–µ–π.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª `LICENSE` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.